# VHub.Media - Сервис по работе с медиаданными
## Назначение: работа с данными фильмов (сериалов) и персон, а также загрузка/извлечение файлов (трейлеров, постеров, аватарок). 
## Хранилища: 
- **MongoDB** для хранения данных о фильмах и сериалах
- **MinIO/S3** для хранения файлов (трейлеров, постеров, аватарок)

Для упрощения логики поддержания консистентности данных были приняты следующие соглашения: 
1. В первую очередь создаются все необходимые персоны. После этого можно создать фильм с указанием персон, связанных с данным фильмом. В рамках одной транзакции происходит создание фильма и обогащение всех персон информацией об этом фильме.
2. Персоны являются статическими документами - данные задаются один раз и не обновляются никогда, т.е. потребителям не предоставляется API для обновления персон.
3. Фильмы являются динамическими документами - при необходимости их можно обновлять, но только те данные, от которых не зависят персоны. Таким образом, после создания фильма обновить связанных персон или добавить новых нельзя.
4. При удалении персоны, автоматически удаляется вся информация о данной персоне у всех связанных фильмов.
5. При удалении фильма, автоматически удаляется вся информация о данном фильме у всех связанных персон.

## EndPoints:
**POST** /media/movies/new - создание нового фильма.\
**DELETE** /media/movies/delete/{id} - удаление фильма по ID.\
**PUT** /media/movies/update - обновление фильма.\
**GET** /media/movies/{id} - получение фильма по ID.\
**POST** /media/movies - получение фильмов по фильтру. [В разработке]

**POST** /media/persons/new - создание новой персоны .\
**DELETE** /media/persons/delete/{id} - удаление персоны по ID.\
**GET** /media/persons/{id} - получение персоны по ID.\
**POST** /media/persons - получение персон по фильтру.

**POST** /media/trailers/upload - загрузка видео на сервер. [В разработке]\
**GET** /media/trailers/download/{id} - скачивание видео по ID. [В разработке]\
**DELETE** /media/trailers/delete/{id} - удаление видео по ID. [В разработке]

## Справочные данные:
Тип персоны: 
1. Актер,
2. Сценарист,
3. Продюсер,
4. Режиссёр,
5. Композитор,
6. Оператор,
7. Монтажёр
   
Жанр:
1. Боевик,
2. Военный,
3. Детектив,
4. Детский,
5. Документальный,
6. Драма,
7. Исторический,
8. Комедия,
9. Криминал,
10. Мелодрама,
11. Мультфильм,
12. Мюзикл,
13. Приключения,
14. Семейный,
15. Спорт,
16. Триллер,
17. Ужасы,
18. Фантастика,
19. Фэнтези
